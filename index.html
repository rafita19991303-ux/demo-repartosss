<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Repartos Express ‚Äì Demo Completa</title>
<style>
  :root{--bg:#0f172a;--panel:#111827;--muted:#94a3b8;--accent:#22c55e;--accent-2:#60a5fa;--danger:#ef4444;--text:#e5e7eb;--card:#0b1220;--shadow:0 10px 25px rgba(0,0,0,.25);--radius:14px}
  *{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,#071127 0%, #051023 100%);color:var(--text);display:flex;flex-direction:column}
  .wrap{max-width:1100px;margin:18px auto;padding:12px}
  header{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;display:grid;place-items:center;font-weight:900;color:#052e16;background:linear-gradient(135deg,var(--accent),#16a34a)}
  h1{margin:0;font-size:1.15rem}
  .subtitle{color:var(--muted);font-size:.9rem}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);border:1px solid rgba(255,255,255,.06);padding:14px;border-radius:12px;margin-top:12px}
  label{display:block;color:var(--muted);font-size:.9rem;margin-top:8px}
  input,textarea,select,button{font-size:1rem}
  input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:#081020;color:var(--text)}
  .row{display:flex;gap:12px}
  .col{flex:1}
  .btn{display:inline-block;padding:10px 12px;border-radius:8px;border:none;cursor:pointer}
  .btn.primary{background:linear-gradient(135deg,var(--accent-2),#2563eb);color:#051329}
  .btn.success{background:linear-gradient(135deg,var(--accent),#16a34a);color:#052e16}
  .btn.warn{background:linear-gradient(135deg,var(--danger),#d97706);color:#220a00}
  .small{font-size:.85rem;color:var(--muted)}
  .hidden{display:none}
  .account-field{display:flex;gap:8px;align-items:center}
  .muted{color:var(--muted)}
  .menu-grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:900px){.menu-grid{grid-template-columns:1fr 380px}}
  .card-scroll{max-height:420px;overflow:auto}
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.04);}
  .share-img{width:100%;height:160px;display:grid;place-items:center;background:linear-gradient(180deg,#071127,#04101b);border-radius:8px;color:var(--muted)}
  .notice{background:rgba(0,0,0,0.25);padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.04)}
  .notification{position:fixed;top:12px;right:12px;width:36px;height:36px;border-radius:50%;background:var(--accent);display:grid;place-items:center;cursor:pointer;z-index:9999;}
  .notification span{display:none;font-size:.75rem;color:#051329;font-weight:bold;}
  #map{height:300px;width:100%;margin-top:8px;border-radius:8px;}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  th,td{border:1px solid rgba(255,255,255,.2);padding:6px;text-align:left}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="logo">RX</div>
  <div>
    <h1>Repartos Express ‚Äî DEMO Completa</h1>
    <div class="subtitle">Simulaci√≥n completa: pagos, pedidos, registros, mapa y panel admin</div>
  </div>
</header>

<!-- NOTIFICACI√ìN PEDIDO -->
<div id="notif" class="notification hidden" title="Nuevo pedido">üîî<span>1</span></div>

<!-- LOGIN / REGISTER -->
<div id="view-auth" class="card">
  <div class="row">
    <!-- LOGIN -->
    <div class="col">
      <h2>Iniciar sesi√≥n</h2>
      <label>Correo</label>
      <input id="login-email" placeholder="correo@ejemplo.com">
      <label>Contrase√±a</label>
      <div class="account-field">
        <input id="login-pass" type="password" placeholder="Contrase√±a">
        <button type="button" id="toggle-login-pass" class="btn" style="padding:4px 8px;">üëÅ</button>
      </div>
      <div style="margin-top:10px">
        <button id="btn-login" class="btn success">Entrar como cliente</button>
        <button id="btn-login-delivery" class="btn primary">Ingresar como repartidor</button>
        <button id="btn-admin-open" class="btn warn">Ingresar como admin</button>
      </div>
      <p class="small" style="margin-top:8px">¬øNo tienes cuenta? <button id="btn-show-register" class="btn" style="padding:4px 8px">Reg√≠strate</button></p>
      <div id="login-msg" class="small muted"></div>
    </div>
    <!-- REGISTER -->
    <div class="col">
      <h2>Registro Cliente</h2>
      <label>Nombre completo</label><input id="r-name" placeholder="Nombre completo">
      <div class="row"><div class="col"><label>Edad</label><input id="r-age" type="number" placeholder="Edad"></div><div class="col"><label>Tel√©fono</label><input id="r-phone" placeholder="55XXXXXXXX"></div></div>
      <label>Correo</label><input id="r-email" placeholder="correo@ejemplo.com">
      <label>Contrase√±a</label>
      <div class="account-field">
        <input id="r-pass" type="password" placeholder="Contrase√±a">
        <button type="button" id="toggle-register-pass" class="btn" style="padding:4px 8px;">üëÅ</button>
      </div>
      <label>Estado</label>
      <select id="r-state"><option value="Coyote">Coyote</option><option value="Tepo">Tepo</option><option value="Huehuetoca">Huehuetoca</option></select>
      <label>C√≥digo postal</label><input id="r-zip" placeholder="C√≥digo postal">
      <label>Ciudad</label><input id="r-city" readonly placeholder="Se autocompleta">
      <label>Direcci√≥n principal</label><textarea id="r-address" rows="2" placeholder="Calle, n√∫mero, colonia"></textarea>
      <div style="margin-top:8px"><button id="btn-register" class="btn success">Crear cuenta (Simulado)</button></div>
    </div>
  </div>

  <hr style="border:none;border-top:1px solid rgba(255,255,255,.03);margin:12px 0">

  <!-- Registro Repartidor -->
  <div>
    <h3>Registro Repartidor (Simulaci√≥n $5)</h3>
    <div class="row">
      <div class="col">
        <label>Nombre repartidor</label><input id="d-name" placeholder="Nombre repartidor">
        <label>Tel√©fono</label><input id="d-phone" placeholder="55XXXXXXXX">
        <label>Veh√≠culo</label><input id="d-vehicle" placeholder="Moto / Auto - Modelo">
        <label>Zonas (separa por comas)</label><input id="d-zones" placeholder="Coyote, Tepo">
        <label>Cuenta para cobrar (CLABE/tarjeta)</label><input id="d-bank" placeholder="CLABE o tarjeta">
        <div style="margin-top:10px"><button id="btn-register-delivery" class="btn primary">Simular pago $5 y Registrar</button></div>
      </div>
    </div>
  </div>
</div>

<!-- APP CLIENTE -->
<div id="app-client" class="hidden card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h2>Panel Cliente</h2>
  </div>
  <div>
    <label>Nuevo pedido</label>
    <input id="c-order" placeholder="Descripci√≥n">
    <button id="btn-client-order" class="btn success" style="margin-top:6px">Crear pedido</button>
  </div>
  <div style="margin-top:12px" class="card-scroll" id="client-orders"></div>
</div>

<!-- APP REPARTIDOR -->
<div id="app-delivery" class="hidden card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h2>Panel Repartidor</h2>
    <div id="notif-delivery" class="notification hidden">üîî</div>
  </div>
  <div id="map"></div>
  <div class="card-scroll" id="delivery-orders"></div>
</div>

<!-- APP ADMIN -->
<div id="app-admin" class="hidden card">
  <h2>Panel Admin</h2>
  <div style="overflow:auto;height:300px">
    <table id="admin-table">
      <thead><tr><th>Nombre</th><th>Email</th><th>Tipo</th><th>Acciones</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY_AQUI"></script>
<script>
const $ = (s, ctx=document)=>ctx.querySelector(s);
const toast=txt=>{const t=document.createElement('div'); t.textContent=txt; t.style.cssText='position:fixed;left:50%;top:20px;transform:translateX(-50%);background:#061322;border:1px solid rgba(255,255,255,.06);padding:10px 14px;border-radius:10px;z-index:9999'; document.body.appendChild(t); setTimeout(()=>t.remove(),1800);};
function loadUsers(){return JSON.parse(localStorage.getItem('rx_users')||'[]');}
function saveUsers(u){localStorage.setItem('rx_users',JSON.stringify(u));}
function loadOrders(){return JSON.parse(localStorage.getItem('rx_orders')||'[]');}
function saveOrders(o){localStorage.setItem('rx_orders',JSON.stringify(o));}

// Mostrar/ocultar contrase√±as
$('#toggle-login-pass').addEventListener('click',()=>{$('#login-pass').type=$('#login-pass').type==='password'?'text':'password';});
$('#toggle-register-pass').addEventListener('click',()=>{$('#r-pass').type=$('#r-pass').type==='password'?'text':'password';});

// LOGIN CLIENTE
$('#btn-login').addEventListener('click',()=>{
  const email=$('#login-email').value.trim(),pass=$('#login-pass').value.trim();
  const users=loadUsers();
  const u=users.find(x=>x.email===email && x.pass===pass);
  if(u){ $('#view-auth').classList.add('hidden'); $('#app-client').classList.remove('hidden'); renderClientOrders(); toast('Bienvenido '+u.name); }
  else toast('Usuario/contrase√±a incorrecta');
});

// LOGIN REPARTIDOR
$('#btn-login-delivery').addEventListener('click',()=>{
  const email=$('#login-email').value.trim(),pass=$('#login-pass').value.trim();
  const users=loadUsers();
  const r=users.find(x=>x.email===email && x.pass===pass && x.type==='delivery');
  if(r){ $('#view-auth').classList.add('hidden'); $('#app-delivery').classList.remove('hidden'); initMap(); toast('Bienvenido repartidor '+r.name); }
  else toast('Usuario/contrase√±a incorrecta o no es repartidor');
});

// REGISTRO CLIENTE
$('#btn-register').addEventListener('click',()=>{
  const name=$('#r-name').value.trim(),age=$('#r-age').value.trim(),email=$('#r-email').value.trim(),pass=$('#r-pass').value.trim();
  if(!name||!age||!email||!pass){toast('Completa todos los campos');return;}
  let users=loadUsers();
  if(users.find(u=>u.email===email)){toast('Correo ya registrado');return;}
  users.push({name,email,pass,type:'client'}); saveUsers(users);
  toast('Cuenta creada (Cliente)'); $('#login-email').value=email; $('#login-pass').value=pass; $('#btn-login').click();
});

// REGISTRO REPARTIDOR
$('#btn-register-delivery').addEventListener('click',()=>{
  const name=$('#d-name').value.trim(),phone=$('#d-phone').value.trim();
  if(!name||!phone){toast('Completa los campos');return;}
  let users=loadUsers();
  const email='rep'+Date.now()+'@demo'; users.push({name,email,pass:'demo123',type:'delivery'}); saveUsers(users);
  toast('Repartidor registrado (simulaci√≥n $5)'); $('#login-email').value=email; $('#login-pass').value='demo123'; $('#btn-login-delivery').click();
});

// RENDER CLIENTE
function renderClientOrders(){ const list=$('#client-orders'); list.innerHTML=''; const orders=loadOrders(); orders.forEach(o=>{const el=document.createElement('div');el.className='card';el.textContent=`${o.desc} - ${o.client}`;list.appendChild(el);});}
$('#btn-client-order').addEventListener('click',()=>{ const desc=$('#c-order').value.trim(); if(!desc){toast('Ingrese descripci√≥n'); return;} const orders=loadOrders(); orders.unshift({desc,client:$('#login-email').value}); saveOrders(orders); renderClientOrders(); toast('Pedido creado'); });

// GOOGLE MAPS
let map,marker;
function initMap(){ map=new google.maps.Map(document.getElementById('map'),{center:{lat:19.5,lng:-99.1},zoom:12}); marker=new google.maps.Marker({position:map.getCenter(),map}); }

// ADMIN
$('#btn-admin-open').addEventListener('click',()=>{
  const pass1=prompt('Ingresa primera contrase√±a admin');
  const pass2=prompt('Ingresa segunda contrase√±a admin');
  if(pass1==='Z8fR3kLp9vJ6Qx2Ty7sHmW0aD1uG4B' && pass2==='X5qV7nM2rC9tY8wK1jL0pF6zS3bH4A'){
    $('#view-auth').classList.add('hidden'); $('#app-admin').classList.remove('hidden'); renderAdmin();
  } else toast('Contrase√±a incorrecta');
});
function renderAdmin(){
  const tbody=$('#admin-table tbody'); tbody.innerHTML=''; const users=loadUsers();
  users.forEach(u=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${u.name}</td><td>${u.email}</td><td>${u.type}</td><td>
      <button class="btn success">‚úî</button>
      <button class="btn warn">‚úñ</button>
    </td>`;
    tbody.appendChild(tr);
  });
}
</script>
</body>
</html>
